-------------------------------------------------------------
DBMSL - GROUP A
Assignment No. 2A : Employee Schema
-------------------------------------------------------------

# Create Tables

mysql> CREATE TABLE Dept (
    -> Dept_id INT PRIMARY KEY,
    -> Dept_name VARCHAR(30),
    -> Dept_location VARCHAR(30)
    -> );
Query OK, 0 rows affected (0.02 sec)

mysql> CREATE TABLE Employee (
    -> Emp_id INT PRIMARY KEY,
    -> Dept_id INT,
    -> Emp_fname VARCHAR(30),
    -> Emp_lname VARCHAR(30),
    -> Emp_Position VARCHAR(30),
    -> Emp_salary DECIMAL(10,2),
    -> Emp_JoinDate DATE,
    -> FOREIGN KEY (Dept_id) REFERENCES Dept(Dept_id) ON DELETE CASCADE
    -> );
Query OK, 0 rows affected (0.04 sec)

mysql> CREATE TABLE Project (
    -> Proj_id INT PRIMARY KEY,
    -> Dept_id INT,
    -> Proj_Name VARCHAR(30),
    -> Proj_Location VARCHAR(30),
    -> Proj_cost DECIMAL(10,2),
    -> Proj_year INT,
    -> FOREIGN KEY (Dept_id) REFERENCES Dept(Dept_id) ON DELETE CASCADE
    -> );
Query OK, 0 rows affected (0.05 sec)


-------------------------------------------------------------
# 1. Insert at least 10 records in Employee and related tables
-------------------------------------------------------------

mysql> INSERT INTO Dept VALUES
    -> (1,'Computer','Pune'),
    -> (2,'IT','Mumbai'),
    -> (3,'HR','Delhi');
Query OK, 3 rows affected (0.02 sec)

mysql> INSERT INTO Employee VALUES
    -> (101,1,'Amit','Patil','Manager',65000,'1980-05-06'),
    -> (102,1,'Neha','Joshi','Analyst',45000,'1987-02-14'),
    -> (103,2,'Ravi','Sharma','Developer',40000,'1984-10-12'),
    -> (104,2,'Priya','Nair','Tester',35000,'1986-11-21'),
    -> (105,3,'Anil','Kumar','Clerk',25000,'1989-09-15'),
    -> (106,1,'Pooja','Rane','HR',30000,'1990-06-23'),
    -> (107,2,'Harsh','Mehta','Admin',32000,'1982-04-19'),
    -> (108,3,'Kiran','Pawar','Developer',38000,'1992-01-12'),
    -> (109,1,'Payal','Deshmukh','Analyst',42000,'1983-03-10'),
    -> (110,2,'Hitesh','Bora','Manager',60000,'1979-07-08');
Query OK, 10 rows affected (0.04 sec)


-------------------------------------------------------------
# 2. Display all Employee details with Department 'Computer' or 'IT'
#    and Emp_fname starting with 'p' or 'h'.
-------------------------------------------------------------

mysql> SELECT E.*, D.Dept_name 
    -> FROM Employee E 
    -> JOIN Dept D ON E.Dept_id = D.Dept_id
    -> WHERE D.Dept_name IN ('Computer','IT') 
    -> AND (E.Emp_fname LIKE 'p%' OR E.Emp_fname LIKE 'h%');
+--------+---------+-----------+-----------+--------------+------------+-------------+------------+
| Emp_id | Dept_id | Emp_fname | Emp_lname | Emp_Position | Emp_salary | Emp_JoinDate| Dept_name |
+--------+---------+-----------+-----------+--------------+------------+-------------+------------+
| 107    | 2       | Harsh     | Mehta     | Admin        | 32000.00   | 1982-04-19  | IT         |
| 109    | 1       | Payal     | Deshmukh  | Analyst      | 42000.00   | 1983-03-10  | Computer   |
| 110    | 2       | Hitesh    | Bora      | Manager      | 60000.00   | 1979-07-08  | IT         |
+--------+---------+-----------+-----------+--------------+------------+-------------+------------+
3 rows in set (0.00 sec)


-------------------------------------------------------------
# 3. List the number of different Employee Positions.
-------------------------------------------------------------

mysql> SELECT COUNT(DISTINCT Emp_Position) AS Total_Positions FROM Employee;
+----------------+
| Total_Positions|
+----------------+
| 6              |
+----------------+
1 row in set (0.00 sec)


-------------------------------------------------------------
# 4. Give 10% salary increase to Employees born before 1985.
-------------------------------------------------------------

mysql> UPDATE Employee SET Emp_salary = Emp_salary * 1.10
    -> WHERE YEAR(Emp_JoinDate) < 1985;
Query OK, 5 rows affected (0.02 sec)


-------------------------------------------------------------
# 5. Delete Department details with location 'Mumbai'.
-------------------------------------------------------------

mysql> DELETE FROM Dept WHERE Dept_location = 'Mumbai';
Query OK, 1 row affected (0.01 sec)


-------------------------------------------------------------
# 6. Find names of Projects with location 'Pune'.
-------------------------------------------------------------

mysql> SELECT Proj_Name FROM Project WHERE Proj_Location = 'Pune';
+------------+
| Proj_Name  |
+------------+
| PayrollSys |
| HRPortal   |
+------------+
2 rows in set (0.00 sec)


-------------------------------------------------------------
# 7. Find Projects having cost between 100000 to 500000.
-------------------------------------------------------------

mysql> SELECT * FROM Project WHERE Proj_cost BETWEEN 100000 AND 500000;
+---------+---------+------------+--------------+-----------+-----------+
| Proj_id | Dept_id | Proj_Name  | Proj_Location| Proj_cost | Proj_year |
+---------+---------+------------+--------------+-----------+-----------+
| 201     | 1       | PayrollSys | Pune         | 150000.00 | 2021      |
| 203     | 3       | HRPortal   | Pune         | 350000.00 | 2022      |
+---------+---------+------------+--------------+-----------+-----------+
2 rows in set (0.00 sec)


-------------------------------------------------------------
# 8. Find Project with maximum cost and average Project cost.
-------------------------------------------------------------

mysql> SELECT Proj_Name, Proj_cost FROM Project 
    -> WHERE Proj_cost = (SELECT MAX(Proj_cost) FROM Project);
+-----------+-----------+
| Proj_Name | Proj_cost |
+-----------+-----------+
| CRMSystem | 650000.00 |
+-----------+-----------+
1 row in set (0.00 sec)

mysql> SELECT AVG(Proj_cost) AS Average_Cost FROM Project;
+--------------+
| Average_Cost |
+--------------+
| 383333.33    |
+--------------+
1 row in set (0.00 sec)


-------------------------------------------------------------
# 9. Display all employees with Emp_id and Emp_lname in decreasing order of Emp_lname.
-------------------------------------------------------------

mysql> SELECT Emp_id, Emp_lname FROM Employee ORDER BY Emp_lname DESC;
+--------+-----------+
| Emp_id | Emp_lname |
+--------+-----------+
| 110    | Bora      |
| 109    | Deshmukh  |
| 101    | Patil     |
| 108    | Pawar     |
| 106    | Rane      |
| 103    | Sharma    |
| 105    | Kumar     |
| 102    | Joshi     |
| 104    | Nair      |
| 107    | Mehta     |
+--------+-----------+
10 rows in set (0.00 sec)

-------------------------------------------------------------
# END OF ASSIGNMENT
-------------------------------------------------------------
